\documentclass{article}
\usepackage{amsmath}

\begin{document}
\section{Gradient Descent}

\begin{align}
    \frac{dC(w_i)}{dw_i} = \lim_{\epsilon \to 0}\frac{C(w_i + \epsilon) - C(w_i)}{\epsilon}
\end{align}

\subsection{``Twice''}

\begin{align}
    C(w) &= \frac{1}{n} \sum_{i=1}^{n} (x_i w - y_i)^2 \\
    C'(w) 
	&= \left(\frac{1}{n} \sum_{i=1}^{n} (x_i w - y_i)^2\right)' \\
	&= \frac{1}{n}\left(\sum_{i=1}^{n} (x_i w - y_i)^2\right)' \\
	&= \frac{1}{n}\left((x_0 w - y_0)^2 + (x_1 w - y_1)^2 + (x_2 w - y_2)^2 + \hdots \right)' \\
	&= \frac{1}{n}\sum_{i=1}^{n} \left((x_i w - y_i)^2\right)' \\
	&= \frac{1}{n}\sum_{i=1}^{n} 2\left(x_i w - y_i) (x_i w - y_i\right)' \\
	&= \frac{1}{n}\sum_{i=1}^{n} 2\left(x_i w - y_i) ((x_i w)' - (y_i)'\right) \\
	&= \frac{1}{n}\sum_{i=1}^{n} 2\left(x_i w - y_i) (x_i w \right)' \\
	&= \frac{1}{n}\sum_{i=1}^{n} 2\left(x_i w - y_i\right)x_i \\
\end{align}

\begin{align}
	C(w) &= \frac{1}{n} \sum_{i=1}^{n} (x_i w - y_i)^2 \\
	C'(w) &= \frac{1}{n}\sum_{i=1}^{n} 2\left(x_i w - y_i\right)x_i \\
\end{align}

\subsection{One Neuron Model}

\begin{align}
	y &= \sigma(xw + b) \\
	\sigma(x) &= \frac{1}{1 + e^{-x}} \\
	\sigma'(x) &= \sigma(x) (1-\sigma(x)) \\
\end{align}

\subsection{Cost}

\def\pd[#1]{\partial_{#1}}
\def\avgsum[#1,#2]{\frac{1}{#2}\sum_{#1=0}^{#2}}

\begin{align}
	v_i &= (x_i w + b) \\
	a_i &= \sigma(v_i) \\
	\pd[w] a_i 
		&= \pd[w](\sigma(v_i))\\
		&= \sigma(v_i)(1 - \sigma(v_i))\pd[w]v_i\\
	C &= \avgsum[i,n](a_i - y_i )^2 \\
	\pd[w] C
		&= \avgsum[i,n]\pd[w]\left((a_i - y_i)^2 \right) \\
		&= \avgsum[i,n]2\left(a_i - y_i \right) \pd[w]\left(a_i - y_i\right)\\
\end{align}

\end{document}

